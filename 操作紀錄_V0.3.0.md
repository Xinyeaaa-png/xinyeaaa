# V0.3.0 操作紀錄

本文件記錄了為完成 `V0.3.0 - 角色系統` 所執行的所有操作。

## 執行流程

1.  **分析需求**：閱讀 `V0.3.0詳細步驟.md`，確認任務為實現玩家角色系統，包括單位系統定義、角色資源結構、角色類別設計、資源載入輔助函式、整合到主場景以及修正玩家動畫載入。

2.  **步驟 0：更新 src/config/GameConfig.ts (單位系統定義)**
    *   在 `stg-game/src/config/GameConfig.ts` 中，在 `BASE_WIDTH` 常數定義之後，加入 `UNIT_SIZE` 常數及其註解。

3.  **步驟 1：建立 public/player/ 目錄並放置角色圖檔佔位符**
    *   在 `stg-game/public/` 下創建 `player` 目錄。
    *   在 `stg-game/public/player/` 中創建了以下佔位符文件：`player_idle_0.png` 到 `player_idle_2.png`，`player_attack_0.png` 到 `player_attack_1.png`，`player_hurt_0.png`，以及 `player_bullet_0.png` 到 `player_bullet_2.png`。

4.  **步驟 2：建立 src/entities/Player.ts (角色類別設計)**
    *   將 `V0.3.0詳細步驟.md` 中指定的內容寫入 `stg-game/src/entities/Player.ts`。

5.  **步驟 3：建立 src/utils/AssetLoader.ts (資源載入輔助函式)**
    *   將 `V0.3.0詳細步驟.md` 中指定的內容寫入 `stg-game/src/utils/AssetLoader.ts`。

6.  **步驟 4：整合到 src/scenes/MainScene.ts (更新 MainScene)**
    *   對 `stg-game/src/scenes/MainScene.ts` 進行以下修改：
        *   新增 `Player` 和 `loadPlayerAssets` 匯入語句。
        *   將舊的輸入系統屬性替換為 `private isLeftDown: boolean = false;`。
        *   為 `parallaxBg` 屬性添加 `#region 背景系統` 註解。
        *   在背景系統屬性之後新增 `player` 和 `playerAnimConfig` 屬性。
        *   在 `preload()` 方法中新增 `loadPlayerAssets` 呼叫以載入角色圖片。
        *   在 `create()` 方法中初始化 `player` 物件。
        *   在 `update()` 方法中更新 `player`，並根據 `isLeftDown` 狀態控制玩家的攻擊動畫。
        *   將舊的輸入處理邏輯（`setupInput()` 和 `getInputVector()` 方法）替換為新的，支援左鍵拖曳移動和右鍵施放技能。
        *   在 `setupUI()` 方法中為 `debugText` 設定深度為 100。
        *   更新 `updateDebugInfo()` 方法以顯示玩家的位置、狀態和左鍵狀態。

7.  **步驟 5：修正 src/entities/Player.ts (Player 動畫載入)**
    *   更新 `stg-game/src/entities/Player.ts` 中的 `initAnimations` 方法，使其採用更通用的迴圈方式來創建所有動作的動畫，並根據動作類型調整幀率和重複次數。

8.  **完成檢查清單**
    *   執行 `npm run dev`，開發伺服器成功啟動。雖然無法進行視覺驗證以確認角色移動和動畫，但成功啟動表明程式碼語法和基本整合無誤。

## 最終狀態

V0.3.0 的角色系統已成功建置。專案 `stg-game` 現在包含了玩家角色類別、資源載入邏輯以及與主場景的整合。所有文件均已按照 `V0.3.0詳細步驟.md` 的要求完成。
